--- qt-copy/src/gui/text/qfontdatabase_x11.cpp.orig	2005-05-13 16:35:52.000000000 +0200
+++ qt-copy/src/gui/text/qfontdatabase_x11.cpp	2005-05-13 18:23:10.861677032 +0200
@@ -27,7 +27,7 @@
 ****************************************************************************/
 
 #include <qplatformdefs.h>
-
+#include <qsettings.h>
 #include <qdatetime.h>
 #include <qpaintdevice.h>
 
@@ -1248,13 +1248,22 @@
             FcPatternAddMatrix(pattern, FC_MATRIX, &matrix);
         }
     }
+    
+	QSettings prefs;
+	bool qt_use_antialiasing = prefs.value( "/qt/useXft", TRUE ).toBool() ;
+	QFont::StyleStrategy strategy;
+	
+	if (qt_use_antialiasing)
+		strategy=request.styleStrategy;
+	else
+		strategy=QFont::NoAntialias;
 
     if (QX11Info::appDepth(fp->screen) <= 8) {
         // can't do antialiasing on 8bpp
         FcPatternAddBool(pattern, FC_ANTIALIAS, false);
-    } else if (request.styleStrategy & (QFont::PreferAntialias|QFont::NoAntialias)) {
+    } else if (strategy & (QFont::PreferAntialias|QFont::NoAntialias)) {
         FcPatternAddBool(pattern, FC_ANTIALIAS,
-                         !(request.styleStrategy & QFont::NoAntialias));
+                         !(strategy & QFont::NoAntialias));
     }
 
     if (script != QUnicodeTables::Common) {
