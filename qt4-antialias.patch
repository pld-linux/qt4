--- qt-everywhere-opensource-src-4.7.0/src/gui/text/qfontdatabase_x11.cpp.orig	2010-09-10 11:05:25.000000000 +0200
+++ qt-everywhere-opensource-src-4.7.0/src/gui/text/qfontdatabase_x11.cpp	2010-09-21 21:46:24.295720986 +0200
@@ -40,7 +40,7 @@
 ****************************************************************************/
 
 #include <qplatformdefs.h>
-
+#include <qsettings.h>
 #include <qdebug.h>
 #include <qpaintdevice.h>
 #include <qelapsedtimer.h>
@@ -1471,8 +1471,11 @@
     if (!stretch)
         stretch = 100;
     FcPatternAddInteger(pattern, FC_WIDTH, stretch);
+    
+	QSettings prefs;
+	bool qt_use_antialiasing = prefs.value( "/qt/useXft", TRUE ).toBool() ;
 
-    if (X11->display && QX11Info::appDepth(screen) <= 8) {
+    if (X11->display && (QX11Info::appDepth(screen) <= 8) || ! (qt_use_antialiasing)) {
         // can't do antialiasing on 8bpp
         FcPatternAddBool(pattern, FC_ANTIALIAS, false);
     } else if (request.styleStrategy & (QFont::PreferAntialias|QFont::NoAntialias)) {
