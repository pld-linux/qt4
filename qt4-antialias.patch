--- qt-copy/src/gui/text/qfontdatabase_x11.cpp.niedakh	2005-05-13 16:35:52.000000000 +0200
+++ qt-copy/src/gui/text/qfontdatabase_x11.cpp	2005-05-13 23:30:47.000000000 +0200
@@ -27,7 +27,7 @@
 ****************************************************************************/
 
 #include <qplatformdefs.h>
-
+#include <qsettings.h>
 #include <qdatetime.h>
 #include <qpaintdevice.h>
 
@@ -1248,13 +1248,16 @@
             FcPatternAddMatrix(pattern, FC_MATRIX, &matrix);
         }
     }
+    
+	QSettings prefs;
+	bool qt_use_antialiasing = prefs.value( "/qt/useXft", TRUE ).toBool() ;
 
-    if (QX11Info::appDepth(fp->screen) <= 8) {
+    if (QX11Info::appDepth(fp->screen) <= 8 || ! (qt_use_antialiasing)) {
         // can't do antialiasing on 8bpp
         FcPatternAddBool(pattern, FC_ANTIALIAS, false);
     } else if (request.styleStrategy & (QFont::PreferAntialias|QFont::NoAntialias)) {
-        FcPatternAddBool(pattern, FC_ANTIALIAS,
-                         !(request.styleStrategy & QFont::NoAntialias));
+	    FcPatternAddBool(pattern, FC_ANTIALIAS,
+            !(request.styleStrategy & QFont::NoAntialias));
     }
 
     if (script != QUnicodeTables::Common) {
